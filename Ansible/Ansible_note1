1. 简介
    IAAS: 仅有一台机器，自己安装操作系统
    PAAS: 硬件，操作系统安装完毕
    SAAS: 软件机操作
    应用场景分析
        在企业开发的过程中，由开发工程师开发软件，测试工程师测试，然后打包部署到服务器上
        为了加快部署的速度，同时完成多台机器的部署，需要使用自动化部署工具。
    常见的自动化运维工具：
        Saltstack，Saltstack一般需部署agent
        Puppet等，Puppet虽然功能强大，但是配置复杂，重型，适合大型环境
        Ansible，作为轻量级的自动化部署工具。

2. 特性 无需安装特定软件，基于OpenSSH
    1. 模块化：调用模块完成特定的任务
    2. 基于Python语言实现，部署简单，不需要安装客户端，无需代理不依赖PKI。
    3. 安全，基于OpenSSH。
    4. 部署简单，基于python和SSH(默认已安装)，agentless
    5. 支持playbook编排任务，以及多层可复用的解决方案role
    6. 幂等性：一个任务执行1遍和执行n遍效果一样，不因重复执行带来意外情况
    7. 可使用任何编程语言写模块
    缺点：
        只能应对几百台主机的情况，对于大型环境一般使用专门的Saltstack

3. Ansible的架构
    首先需要添加主机清单
    通过Modules 执行命令
    通过PlayBook自动化执行

    Ansible由INVENTORY、API、MODULES、PLUGINS所组成，是ansible核心执行工具。
        INVENTORY：ansible管理主机的清单/etc/ansible/hosts
        MODULES：命令的执行模块，多数为内置核心模块
        PLUGINS：模块功能的补充
        API：第三方程序调用的编程接口

    ansible实现管理的主要方式：
        Ad-Hoc：直接使用ansible命令，用于临时命令使用场景。
        Ansible-playbook：长期规划好的，大型项目的场景。

    Ansible-playbook（剧本）执行过程
        将已有编排好的任务集写入Ansible-Playbook
        通过ansible-playbook命令分拆任务集至逐条ansible命令，按预定规则逐条执行

    Ansible主要操作对象
       HOSTS主机
       NETWORKING网络设备

4. 安装Ansible
    1. 安装配置1台服务机，3台客户机
        重复创建四台机器：
            下载centos_mini, 创建虚拟机，配置存储盘片，语言，磁盘分区，begin install
            root admin
        为4台机器配置不同的静态的IP地址，且可以访问外网
            onBOOT=yes, systemctl restart network
            修改虚拟机网络连接方式为桥接方式 ip addr -> ip地址
            通过终端连接虚拟机
        配置机器yum源：
            cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
            curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
            yum clean all # 清除系统所有的yum缓存
            yum makecache # 生成yum缓存
            安装vim,net-tools,nmtui
        nmtui配置静态IP:
            手动模式，IP地址 192.168.1.8/24
                          192.168.1.7/24
                          192.168.1.11/24
                    Server: 192.168.1.9/24  Dai ~/.ssh/config

            以及GateWay和DNS Server

    2. Server机安装Ansible
        配置epel国内源：
            yum install epel-release  EPEL源，额外的软件包
            wget -O /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo    # 下载阿里开源镜像的epel源文件
            yum clean all # 清除系统所有的yum缓存
            yum makecache # 生成yum缓存
        安装ansible:
            yum install ansible
        确认安装：
            ansible --version

5. Ansible 配置文件
    rpm -ql ansible | less 有很多，主要是各种管理的模块

    配置文件，配置文件一般都放在/etc/ansible下
        /etc/ansible/ansible.cfg  主配置文件,配置ansible工作特性(一般无需修改)
        /etc/ansible/hosts        主机清单(将被管理的主机放到此文件)
        /etc/ansible/roles/       存放角色的目录

    程序
        /usr/bin/ansible          主程序，临时命令执行工具
        /usr/bin/ansible-doc      查看配置文档，模块功能查看工具
        /usr/bin/ansible-galaxy   下载/上传优秀代码或Roles模块的官网平台
        /usr/bin/ansible-playbook 定制自动化任务，编排剧本工具
        /usr/bin/ansible-pull     远程执行命令的工具
        /usr/bin/ansible-vault    文件加密工具
        /usr/bin/ansible-console  基于Console界面与用户交互的执行工具

        这些都是通过Python来进行编写的
