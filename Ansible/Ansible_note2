1. ansible命令执行过程
    1. 加载自己的配置文件 默认/etc/ansible/ansible.cfg
    2. 加载自己对应的模块文件，如command
    3. 通过ansible将模块或命令生成对应的临时py文件，
     并将该文件传输至远程服务器的对应执行用户$HOME/.ansible/tmp/ansible-tmp-数字/XXX.PY文件
    4. 给文件+x执行
    5. 执行并返回结果
    6. 删除临时py文件，sleep 0退出

    执行状态：
      绿色：执行成功并且不需要做改变的操作
      黄色：执行成功并且对目标主机做变更
      红色：执行失败

    ansible all -m ping -vvv 可以查看到复制的临时文件，使用了Put命令，chmod加权限

2. Command以及Shell模块
    command: 执行命令，此命令不支持 $VARNAME < > | ; & 等 变量，管道，重定向有问题
        chdir:   进入到被管理主机目录
        creates: 如果有一个目录是存在的,步骤将不会运行Command命令
    shell:
        ansible all -m shell -a 'echo $HOSTNAME'
        ansible all -m shell -a 'useradd dai'
        ansible all -a 'echo "jsx#609!" | passwd dai'

    注意：
        1. 配置默认使用shell模块：
            vim /etc/ansible/ansible.cfg
            module_name = shell
        2. 复杂命令，即使使用shell也可能会失败，建议使用script模块运行脚本

    实例：
    1. 使用默认的command模块创建文件夹
        ansible all -a "mkdir /data"
        ansible all -a "ls -dl /data"
    2. 进入默认模块执行操作
        ansible all -a "chdir=/data mkdir ./data1"

3. Script模块,Copy模块,Fetch模块
    Script:
        自动执行脚本，ansible all -m script -a test.sh
    Copy模块:
        1. 参数
            src : 源文件  指定拷贝文件的本地路径  (如果有/ 则拷贝目录内容,比拷贝目录本身)
            dest: 指定目标路径
            mode: 设置权限
            backup: 备份源文件
            content: 代替src  指定本机文件内容,生成目标主机文件
        2. 实例
            如果目标存在，默认覆盖，此处指定先备份,备份文件名：test2.sh.3129.2021-08-11@20:17:04~
            ansible list1 -m copy -a "src=test.sh dest=/tmp/test2.sh owner=dai mode=755 backup=yes"
            ansible list1 -a "ls -l /tmp"
            指定内容，直接生成目标文件
            ansible list1 -m copy -a "content='test content\nxxx' dest=/tmp/test.txt"
            复制目录
            ansible list1 -m copy -a "src=. dest=/tmp/ owner=dai mode=755 backup=yes"
    Fetch模块:
        ansible-doc -s fetch
        从远程主机提取文件至主控端，与copy相反,只能获取文件，不能获取文件夹

        实例：
            获取sh文件,文件放置路径为 /data/192.168.1.7/tmp/test2.sh
            ansible list1 -m fetch -a 'src=/tmp/test2.sh dest=/data'
            ls -l /data/scripts
            打包获取所有的日志文件, shell模块不好打包
            ansible list1 -a 'ls /var/log'
            ansible list1 -m fetch -a 'src=/root/test.tar.gz dest=/data/'